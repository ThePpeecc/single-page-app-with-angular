<div ng-controller="RecipeDetailController as detailController">
<div class="grid-100 row controls">
  <div class="grid-50">

    <h2>{{detailController.edit ? detailController.recipe.name : 'Add New Recipe'}}</h2>
  </div>
  <div class="grid-50">
    <div class="flush-right">

      <button ng-click="detailController.edit ? detailController.updateRecipe() : detailController.saveRecipe()">Save Recipe</button>
      <button class="secondary" ng-click="detailController.cancel();">{{detailController.done ? 'Done' : 'Cancel'}}</button>
    </div>
  </div>
</div>
<div class="clear"></div>

<div class="grid-100 row" ng-if="detailController.errors.length > 0">
  <div class="grid-100">
    <p><i>The following errors were found:</i></p>
    <ul class="validation-errors">
      <li ng-repeat="(index, error) in detailController.errors">
        {{error.userMessage}}
      </li>
    </ul>
  </div>
</div>
<div class="clear"></div>

<div class="grid-100 row">
  <div class="grid-20">
    <p class="label-spacing">
      <label> Name </label>
    </p>
  </div>
  <div class="grid-40">
    <p>
      <input type="text" value="" ng-model="detailController.recipe.name">
    </p>
  </div>
</div>
<div class="clear"></div>

<div class="grid-100 row">
  <div class="grid-20">
    <p class="label-spacing">
      <label> Description </label>
    </p>
  </div>
  <div class="grid-60">
    <p>
      <textarea ng-model="detailController.recipe.description"></textarea>
    </p>
  </div>
</div>
<div class="clear"></div>

<div class="grid-100 row">
  <div class="grid-20">
    <p class="label-spacing">
      <label> Category </label>
    </p>
  </div>
  <div class="grid-30">
    <p>
      <select ng-model="detailController.standard" ng-options="category.name for category in detailController.categories" ng-change="detailController.recipe.category = detailController.standard.name">
      </select>
    </p>
  </div>
</div>
<div class="clear"></div>

<div class="grid-100 row">
  <div class="grid-20">
    <p class="label-spacing">
      <label> Prep Time </label>
    </p>
  </div>
  <div class="grid-20">
    <p>
      <input type="number" ng-model="detailController.recipe.prepTime">
    </p>
  </div>
</div>
<div class="clear"></div>

<div class="grid-100 row">
  <div class="grid-20">
    <p class="label-spacing">
      <label> Cook Time </label>
    </p>
  </div>
  <div class="grid-20">
    <p>
      <input type="number" ng-model="detailController.recipe.cookTime">
    </p>
  </div>
</div>
<div class="clear"></div>

<div class="grid-100 row">
  <div class="grid-20">
    <p class="label-spacing">
      <label> Ingredients </label>
    </p>
  </div>
  <div class="grid-30">
    <p class="label-spacing">
      <label> Item </label>
    </p>
  </div>
  <div class="grid-30">
    <p class="label-spacing">
      <label> Condition </label>
    </p>
  </div>
  <div class="grid-15">
    <p class="label-spacing">
      <label> Amount </label>
    </p>
  </div>
  <div class="ingredient-row" ng-repeat="(index, ingredient) in detailController.recipe.ingredients">
    <div class="prefix-20 grid-30">
      <p>
          {{standardFood = detailController.findFoodItem(ingredient.foodItem, detailController.foodItems);""}}
        <select ng-model="standardFood" ng-options="foodItem.name for foodItem in detailController.foodItems" ng-change="ingredient.foodItem = standardFood.name">
        </select>
      </p>
    </div>
    <div class="grid-30">
      <p>
        <input type="text" ng-model="ingredient.condition">
      </p>
    </div>
    <div class="grid-15">
      <p>
        <input type="text" ng-model="ingredient.amount">
      </p>
    </div>
    <div class="grid-5 pad-top">
      <p class="flush-right">
        <a class="no-action-link" ng-click="detailController.deleteFromArray(detailController.recipe.ingredients, index)"> <img src="images/delete.svg" height="12px"> </a>
      </p>
    </div>
  </div>

  <div class="prefix-20 grid-80 add-row">
    <p>
      <button ng-click="detailController.addNewItem(detailController.recipe.ingredients)">+ Add Another Ingredient</button>
    </p>
  </div>

</div>
<div class="clear"></div>

<div class="grid-100 row">
  <div class="grid-20">
    <p class="label-spacing">
      <label> Steps </label>
    </p>
  </div>
  <div class="grid-75">
    <p class="label-spacing">
      <label> Description </label>
    </p>
  </div>

  <div class="step-row" ng-repeat="(index, step) in detailController.recipe.steps">
    <div class="prefix-20 grid-75">
      <p>
        <input type="text" ng-model="step.description">
      </p>
    </div>
    <div class="grid-5 pad-top">
      <p class="flush-right">
        <a class="no-action-link" ng-click="detailController.deleteFromArray(detailController.recipe.steps, index)"> <img src="images/delete.svg" height="12px"> </a>
      </p>
    </div>
  </div>

  <div class="prefix-20 grid-80 add-row">
    <p>
     <button ng-click="detailController.addNewItem(recipe.steps)">+ Add Another Step</button>
    </p>
  </div>

</div>
<div class="clear"></div>
</div>
